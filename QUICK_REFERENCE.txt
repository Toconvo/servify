================================================================================
                    SERVIFY 后台管理系统 - 快速参考
================================================================================

ADMIN UI 功能状态检查清单（apps/demo-web/admin）
================================================================================

[x] 1. ADMIN CONSOLE TABS
  [x] Dashboard - 关键指标 + 图表可视化 + CSV 导出（前端生成）
  [x] Tickets - 列表/创建/编辑 + 批量操作 + 导出 + 自定义字段
  [x] Customers - 列表/创建/编辑 + 备注/标签/活动
  [x] Agents - 在线客服列表 + 负载/绩效统计
  [x] Session Transfer - 等待队列 + 转接历史 + 手动转接
  [x] Satisfaction - 满意度评价 + CSAT 调查（含公共答卷）
  [x] SLA - 配置 + 违约列表 + 统计/趋势图 + CSV 导出（前端生成）
  [x] Macros - 宏与回复模板（应用到工单评论）
  [x] Automations - 触发器 CRUD + 批量执行（含 dry-run）+ 执行记录
  [x] Integrations - 应用市场集成点（列表/启用状态）
  [x] AI Status - AI 状态 + 查询测试 + WeKnora 开关（增强）

[x] 2. SERVICE QUALITY / QoS
  [x] SLA 定义与监控（后台定时检查 + 违约记录）
  [x] SLA 违约处理（标记已解决 + 统计）
  [x] CSAT 调查与满意度统计（评分分布/趋势/分类）
  [x] 指标采集与可观测性（Prometheus `/metrics` + OpenTelemetry 可选）

[x] 3. REPORTS & ANALYTICS
  [x] 仪表板统计（/api/statistics/dashboard）
  [x] 趋势/分布图表（ECharts）
  [x] CSV 导出（前端生成：工单趋势/满意度趋势/SLA 趋势等）
  [ ] 自定义报表（按维度组合/保存视图）
  [ ] PDF/Excel 导出（服务端生成）

================================================================================
API ENDPOINT QUICK REFERENCE
================================================================================

鉴权与权限:
  - 管理接口：/api/** 需要 JWT（Authorization: Bearer <token>）+ RBAC
  - 公共接口：/public/** 无需登录
  - 实时/AI：/api/v1/**（以配置为准）

Tickets:
  POST   /api/tickets
  POST   /api/tickets/bulk
  GET    /api/tickets
  GET    /api/tickets/export
  GET    /api/tickets/stats
  GET    /api/tickets/{id}
  PUT    /api/tickets/{id}
  POST   /api/tickets/{id}/assign
  POST   /api/tickets/{id}/comments
  POST   /api/tickets/{id}/close

Customers:
  POST   /api/customers
  GET    /api/customers
  GET    /api/customers/stats
  GET    /api/customers/{id}
  PUT    /api/customers/{id}
  GET    /api/customers/{id}/activity
  POST   /api/customers/{id}/notes
  PUT    /api/customers/{id}/tags

Agents:
  POST   /api/agents
  GET    /api/agents/{id}
  PUT    /api/agents/{id}/status
  POST   /api/agents/{id}/online
  POST   /api/agents/{id}/offline
  GET    /api/agents/online
  POST   /api/agents/{id}/assign-session
  POST   /api/agents/{id}/release-session
  GET    /api/agents/stats
  GET    /api/agents/find-available

Session Transfer:
  POST   /api/session-transfer/to-human
  POST   /api/session-transfer/to-agent
  GET    /api/session-transfer/history/{session_id}
  GET    /api/session-transfer/waiting
  POST   /api/session-transfer/cancel
  POST   /api/session-transfer/process-queue
  POST   /api/session-transfer/check-auto

Satisfaction / CSAT:
  POST   /api/satisfactions
  GET    /api/satisfactions
  GET    /api/satisfactions/stats
  GET    /api/satisfactions/surveys
  POST   /api/satisfactions/surveys/{id}/resend
  GET    /api/tickets/{ticket_id}/satisfaction
  GET    /public/csat/{token}
  POST   /public/csat/{token}/respond

SLA:
  POST   /api/sla/configs
  GET    /api/sla/configs
  GET    /api/sla/configs/{id}
  PUT    /api/sla/configs/{id}
  DELETE /api/sla/configs/{id}
  GET    /api/sla/configs/priority/{priority}
  GET    /api/sla/violations
  POST   /api/sla/violations/{id}/resolve
  GET    /api/sla/stats
  POST   /api/sla/check/ticket/{ticket_id}

Statistics:
  GET    /api/statistics/dashboard
  GET    /api/statistics/time-range
  GET    /api/statistics/agent-performance
  GET    /api/statistics/ticket-category
  GET    /api/statistics/ticket-priority
  GET    /api/statistics/customer-source
  POST   /api/statistics/update-daily

Macros:
  GET    /api/macros
  POST   /api/macros
  PUT    /api/macros/{id}
  DELETE /api/macros/{id}
  POST   /api/macros/{id}/apply

Automations:
  GET    /api/automations
  POST   /api/automations
  DELETE /api/automations/{id}
  POST   /api/automations/run
  GET    /api/automations/runs

Custom Fields:
  GET    /api/custom-fields
  POST   /api/custom-fields
  GET    /api/custom-fields/{id}
  PUT    /api/custom-fields/{id}
  DELETE /api/custom-fields/{id}

Knowledge Base:
  GET    /api/knowledge-docs
  POST   /api/knowledge-docs
  GET    /api/knowledge-docs/{id}
  PUT    /api/knowledge-docs/{id}
  DELETE /api/knowledge-docs/{id}
  GET    /public/kb/docs
  GET    /public/kb/docs/{id}
  GET    /public/portal/config

Assist:
  GET    /api/assist/suggest
  POST   /api/assist/suggest

Gamification:
  GET    /api/gamification/leaderboard

Shifts (API only):
  POST   /api/shifts
  GET    /api/shifts
  PUT    /api/shifts/{id}
  DELETE /api/shifts/{id}
  GET    /api/shifts/stats

AI / Realtime (v1):
  GET    /api/v1/ws
  GET    /api/v1/ws/stats
  GET    /api/v1/webrtc/stats
  GET    /api/v1/webrtc/connections
  POST   /api/v1/ai/query
  GET    /api/v1/ai/status
  GET    /api/v1/ai/metrics
  POST   /api/v1/ai/knowledge/upload
  POST   /api/v1/ai/knowledge/sync
  PUT    /api/v1/ai/weknora/enable
  PUT    /api/v1/ai/weknora/disable
  POST   /api/v1/ai/circuit-breaker/reset

================================================================================
CODE STATISTICS（approx）
================================================================================

Admin UI:
  apps/demo-web/admin/index.html   805 行
  apps/demo-web/admin/style.css    552 行
  apps/demo-web/admin/main.js      3062 行

Server（约，含测试文件）:
  apps/server/internal/handlers    7270 行
  apps/server/internal/services   11041 行
  apps/server/internal/models      407 行

================================================================================
OPEN ITEMS（建议下一步）
================================================================================

[ ] 管理后台实时更新（SSE/WebSocket 推送统计与队列变化）
[ ] 自定义报表（保存过滤器/维度组合）+ 服务器端导出（PDF/Excel）
[ ] Shift UI（排班/假期/冲突校验）与权限收敛
[ ] 审计日志（关键动作：登录、批量操作、SLA/自动化执行）

================================================================================
最后更新: 2025-12-30
================================================================================
